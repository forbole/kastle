<!doctype html>
<html>
  <head>
    <title>Demo Page</title>
    <script>
      async function initWasm() {
        const kaspa = await import("./kaspa.js");
        await kaspa.default();
        console.log("WASM module loaded successfully!");
        window.kaspaWasm = kaspa;
      }
      initWasm();
    </script>
  </head>

  <body>
    <h1>Demo page</h1>
    <div>
      <h3>Network</h3>
      <div>Network: <span id="network">testnet-10</span></div>
      <button id="changeToMainnet">Change to Mainnet</button>
      <button id="changeToTestnet10">Change to Testnet10</button>
      <button id="changeToTestnet11">Change to Testnet11</button>
    </div>

    <h3>Kastle Basic</h3>
    <div>
      <button id="connectButton">Connect</button>
      <div>Connected: <span id="connected">false</span></div>
    </div>

    <div>
      <button id="getAccountButton">Get Account</button>
      <div>Address: <span id="address"></span></div>
      <div>Public Key: <span id="publicKey"></span></div>
    </div>

    <div>
      <button id="signAndBroadcastTx">Sign and Broadcast Tx</button>
      <div>Tx id: <span id="txId"></span></div>
    </div>
    <div>Error: <span id="error">None</span></div>

    <div>
      <button id="signMessage">Sign Message</button>
      <div>Signature: <span id="signature"></span></div>
      <div>Error: <span id="signMessageError">None</span></div>
    </div>

    <hr />

    <h3>KRC20</h3>
    <div>
      <h4>Get KRC20</h4>
      <button id="getKRC20Tokens">Get KRC20 Tokens</button>
      <ul id="krc20Tokens"></ul>
      <div>Error: <span id="krc20TokensError">None</span></div>
    </div>

    <div>
      <h4>Deploy Mint Mode KRC20</h4>
      <div>
        Tick:
        <input type="text" id="deployTick" placeholder="TTTT" maxlength="6" />
      </div>
      <button id="krcDeployCommit">Deploy KRC Commit</button>
      <button id="krcDeployReveal">Deploy KRC Reveal</button>
      <div>P2SH address: <span id="P2SHDeployAddress"></span></div>
      <div>Script: <span id="deployScript"></span></div>
      <div>Commit Tx Id: <span id="deployCommitTxId"></span></div>
      <div>Reveal Tx Id: <span id="deployRevealTxId"></span></div>
      <div>Error: <span id="deployErrorKRC20">None</span></div>

      <hr />

      <h4>Mint KRC20</h4>
      <div>
        Tick:
        <input type="text" id="mintTick" placeholder="TTTT" maxlength="6" />
      </div>
      <button id="krcMintCommit">Mint KRC Commit</button>
      <button id="krcMintReveal">Mint KRC Reveal</button>
      <div>P2SH address: <span id="P2SHMintAddress"></span></div>
      <div>Script: <span id="mintScript"></span></div>
      <div>Commit Tx Id: <span id="mintCommitTxId"></span></div>
      <div>Reveal Tx Id: <span id="mintRevealTxId"></span></div>
      <div>Error: <span id="mintErrorKRC20">None</span></div>

      <hr />

      <h4>Deploy Issue Mode KRC20</h4>
      <div>
        Name:
        <input type="text" id="issueName" placeholder="IIII" maxlength="6" />
      </div>
      <button id="krcDeployIssueCommit">Deploy KRC20 Issue Commit</button>
      <button id="krcDeployIssueReveal">Deploy KRC20 Issue Reveal</button>
      <div>P2SH address: <span id="P2SHDeployIssueAddress"></span></div>
      <div>Script: <span id="deployIssueScript"></span></div>
      <div>Commit Tx Id: <span id="deployIssueCommitTxId"></span></div>
      <div>Reveal Tx Id: <span id="deployIssueRevealTxId"></span></div>
      <div>Error: <span id="deployIssueErrorKRC20">None</span></div>

      <hr />

      <h4>Issue KRC20</h4>
      <div>
        Contract address:
        <input type="text" id="issueContractAddress" />
      </div>
      <div>
        Amount:
        <input type="number" id="issueAmount" placeholder="1000" value="1000" />
      </div>
      <button id="krcIssueCommit">Issue KRC Commit</button>
      <button id="krcIssueReveal">Issue KRC Reveal</button>
      <div>P2SH address: <span id="P2SHIssueAddress"></span></div>
      <div>Script: <span id="issueScript"></span></div>
      <div>Commit Tx Id: <span id="issueCommitTxId"></span></div>
      <div>Reveal Tx Id: <span id="issueRevealTxId"></span></div>
      <div>Error: <span id="issueErrorKRC20">None</span></div>

      <hr />

      <h4>Transfer KRC20</h4>
      <div>
        Tick:
        <input type="text" id="transferTick" placeholder="TTTT" maxlength="6" />
      </div>
      <div>
        To: <input type="text" id="transferTo" placeholder="kaspatest:" />
      </div>
      <div>
        Amount:
        <input
          type="number"
          id="transferAmount"
          placeholder="1000"
          value="1000"
        />
      </div>
      <button id="krcTransferCommit">Transfer KRC Commit</button>
      <button id="krcTransferReveal">Transfer KRC Reveal</button>
      <div>P2SH address: <span id="P2SHTransferAddress"></span></div>
      <div>Script: <span id="transferScript"></span></div>
      <div>Commit Tx Id: <span id="trnasferCommitTxId"></span></div>
      <div>Reveal Tx Id: <span id="transferRevealTxId"></span></div>
      <div>Error: <span id="transferErrorKRC20">None</span></div>
    </div>
    <hr />

    <div>
      <h3>KRC20 Trade</h3>
      <div>
        <h4>List KRC20</h4>
        <input type="text" id="tradeListTick" placeholder="TTTT" />
        <input type="number" id="tradeListAmount" placeholder="1000" />
        <button id="krcListCommit">List KRC Commit</button>
        <button id="krcListReveal">List KRC Reveal</button>
        <div>List P2SH address: <span id="P2SHListAddress"></span></div>
        <div>Script: <span id="listScript"></span></div>
        <div>Commit Tx Id: <span id="listCommitTxId"></span></div>
        <div>Reveal Tx Id: <span id="listRevealTxId"></span></div>
        <div>Send P2SH address: <span id="sendP2SHAddress"></span></div>
        <div>Send Script: <span id="sendScript"></span></div>
        <div>Error: <span id="listErrorKRC20">None</span></div>
      </div>

      <hr />

      <div>
        <h3>Prepared Send Transaction</h3>
        <button id="preparedSendTx">Prepare</button>
        <div>Prepared Tx: <span id="sendPreparedTx"></span></div>
        <div>Error: <span id="sendPreparedError">None</span></div>
      </div>

      <hr />

      <div>
        <h4>Cancel KRC20 Trade</h4>
        <button id="krcCancelReveal">Cancel Trade</button>
        <div>Cancel Trade Tx Id: <span id="cancelTradeTxId"></span></div>
        <div>Error: <span id="cancelErrorKRC20">None</span></div>
      </div>
    </div>

    <hr />

    <div>
      <h4>Buy KRC20 Trade</h4>
      <button id="krcBuyReveal">Buy KRC Reveal</button>
      <div>Buy Trade Tx Id: <span id="buyTradeTxId"></span></div>
      <div>Error: <span id="buyErrorKRC20">None</span></div>
    </div>

    <hr />

    <div>
      <h3>ERC20 watch asset</h3>
      <input
        type="text"
        id="erc20Address"
        value="0x58adee6697ef1b53b6b2de4f392e37d1ca6a8fdc"
      />
      <input type="text" id="erc20Symbol" value="TEST" />
      <input type="text" id="erc20Decimals" value="8" />
      <input type="text" id="erc20ChainId" value="0x3e9" />
      <button id="erc20WatchAsset">Watch Asset</button>
      <div>Error: <span id="watchAssetError">None</span></div>
    </div>
  </body>
  <script src="index.js"></script>
</html>
